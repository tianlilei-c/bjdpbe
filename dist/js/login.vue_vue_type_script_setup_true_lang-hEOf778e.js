var se=Object.defineProperty,ae=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var J=(n,a,s)=>a in n?se(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s,N=(n,a)=>{for(var s in a||(a={}))oe.call(a,s)&&J(n,s,a[s]);if(z)for(var s of z(a))ie.call(a,s)&&J(n,s,a[s]);return n},U=(n,a)=>ae(n,ne(a));var Q=(n,a,s)=>new Promise((r,i)=>{var c=u=>{try{o(s.next(u))}catch(g){i(g)}},e=u=>{try{o(s.throw(u))}catch(g){i(g)}},o=u=>u.done?r(u.value):Promise.resolve(u.value).then(c,e);o((s=s.apply(n,a)).next())});import{b8 as le,b9 as re,ba as ce,b7 as ue,b0 as d,b5 as fe,b1 as de,bb as me,b2 as pe,bc as ge,ax as he,bd as be,b6 as Y,be as ye}from"./bootstrap-BHWmWfJw.js";import{a4 as E,J as x,av as k,ab as h,aw as C,a8 as R,bk as $,P as X,aV as V,x as M,a7 as l,ac as T,aa as A,ai as B,aj as D,a_ as G,a$ as ve,T as te,Y as we,ao as _e,bJ as Se,b6 as H,aW as Te,a9 as Re,aq as Z,aB as ee,Q as Me}from"../jse/index-index-a2lIU8i0.js";import{T as Pe}from"./auth-title-B4-63hsq.js";const $e=E({__name:"spine-text",props:{animationDuration:{default:2},animationIterationCount:{default:"infinite"}},setup(n){const a=x(()=>({animation:`shine ${n.animationDuration}s linear ${n.animationIterationCount}`}));return(s,r)=>(h(),k("div",{style:C(a.value),class:"vben-spine-text !bg-clip-text text-transparent"},[R(s.$slots,"default")],4))}}),xe=E({__name:"slider-captcha-action",props:{actionStyle:{},isPassing:{type:Boolean},toLeft:{type:Boolean}},setup(n,{expose:a}){const s=n,r=$("actionRef"),i=X("0"),c=x(()=>{const{actionStyle:o}=s;return U(N({},o),{left:i.value})}),e=x(()=>Number.parseInt(i.value)>10&&!s.isPassing);return a({getEl:()=>r.value,getStyle:()=>{var o;return(o=r==null?void 0:r.value)==null?void 0:o.style},setLeft:o=>{i.value=o}}),(o,u)=>(h(),k("div",{ref_key:"actionRef",ref:r,class:V([{"transition-width !left-0 duration-300":o.toLeft,"rounded-md":e.value},"bg-background dark:bg-accent absolute left-0 top-0 flex h-full cursor-move items-center justify-center px-3.5 shadow-md"]),style:C(c.value),name:"captcha-action"},[M(l(le),{"is-passing":o.isPassing,class:"text-foreground/60 size-4"},{default:T(()=>[R(o.$slots,"icon",{},()=>[o.isPassing?(h(),A(l(ce),{key:1})):(h(),A(l(re),{key:0}))])]),_:3},8,["is-passing"])],6))}}),ke=E({__name:"slider-captcha-bar",props:{barStyle:{},toLeft:{type:Boolean}},setup(n,{expose:a}){const s=n,r=$("barRef"),i=X("0"),c=x(()=>{const{barStyle:e}=s;return U(N({},e),{width:i.value})});return a({getEl:()=>r.value,setWidth:e=>{i.value=e}}),(e,o)=>(h(),k("div",{ref_key:"barRef",ref:r,class:V([e.toLeft&&"transition-width !w-0 duration-300","bg-success absolute h-full"]),style:C(c.value)},null,6))}}),Ee=E({__name:"slider-captcha-content",props:{contentStyle:{},isPassing:{type:Boolean},successText:{},text:{}},setup(n,{expose:a}){const s=n,r=$("contentRef"),i=x(()=>{const{contentStyle:c}=s;return N({},c)});return a({getEl:()=>r.value}),(c,e)=>(h(),k("div",{ref_key:"contentRef",ref:r,class:V([{[c.$style.success]:c.isPassing},"absolute top-0 flex size-full select-none items-center justify-center text-xs"]),style:C(i.value)},[R(c.$slots,"text",{},()=>[M(l($e),{class:"flex h-full items-center"},{default:T(()=>[B(D(c.isPassing?c.successText:c.text),1)]),_:1})])],6))}}),Le="_success_fwxn1_2",Be={success:Le},De={$style:Be},Ce=ue(Ee,[["__cssModules",De]]),Ve=E({__name:"index",props:G({class:{},actionStyle:{default:()=>({})},barStyle:{default:()=>({})},contentStyle:{default:()=>({})},wrapperStyle:{default:()=>({})},isSlot:{type:Boolean,default:!1},successText:{default:""},text:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:G(["end","move","start","success"],["update:modelValue"]),setup(n,{expose:a,emit:s}){const r=n,i=s,c=ve(n,"modelValue"),e=te({endTime:0,isMoving:!1,isPassing:!1,moveDistance:0,startTime:0,toLeft:!1});a({resume:I});const o=$("wrapperRef"),u=$("barRef"),g=$("contentRef"),_=$("actionRef");we(()=>e.isPassing,t=>{if(t){const{endTime:m,startTime:p}=e,y=(m-p)/1e3;i("success",{isPassing:t,time:y.toFixed(1)}),c.value=t}}),_e(()=>{e.isPassing=!!c.value});function f(t){return"pageX"in t?t.pageX:"touches"in t&&t.touches[0]?t.touches[0].pageX:0}function b(t){e.isPassing||_.value&&(i("start",t),e.moveDistance=f(t)-Number.parseInt(_.value.getStyle().left.replace("px","")||"0",10),e.startTime=Date.now(),e.isMoving=!0)}function W(t){var v,w,P;const m=(w=(v=o.value)==null?void 0:v.offsetWidth)!=null?w:220,p=(P=t==null?void 0:t.offsetWidth)!=null?P:40,y=m-p-6;return{actionWidth:p,offset:y,wrapperWidth:m}}function j(t){const{isMoving:m,moveDistance:p}=e;if(m){const y=l(_),v=l(u);if(!y||!v)return;const{actionWidth:w,offset:P,wrapperWidth:L}=W(y.getEl()),S=f(t)-p;i("move",{event:t,moveDistance:p,moveX:S}),S>0&&S<=P?(y.setLeft(`${S}px`),v.setWidth(`${S+w/2}px`)):S>P&&(y.setLeft(`${L-w}px`),v.setWidth(`${L-w/2}px`),r.isSlot||q())}}function F(t){const{isMoving:m,isPassing:p,moveDistance:y}=e;if(m&&!p){i("end",t);const v=_.value,w=l(u);if(!v||!w)return;const P=f(t)-y,{actionWidth:L,offset:S,wrapperWidth:K}=W(v.getEl());P<S?r.isSlot?setTimeout(()=>{if(c.value){const O=l(g);O&&(O.getEl().style.width=`${Number.parseInt(w.getEl().style.width)}px`)}else I()},0):I():(v.setLeft(`${K-L}px`),w.setWidth(`${K-L/2}px`),q()),e.isMoving=!1}}function q(){if(r.isSlot){I();return}e.endTime=Date.now(),e.isPassing=!0,e.isMoving=!1}function I(){e.isMoving=!1,e.isPassing=!1,e.moveDistance=0,e.toLeft=!1,e.startTime=0,e.endTime=0;const t=l(_),m=l(u),p=l(g);!t||!m||!p||(p.getEl().style.width="100%",e.toLeft=!0,Se(()=>{e.toLeft=!1,t.setLeft("0"),m.setWidth("0")},300))}return(t,m)=>(h(),k("div",{ref_key:"wrapperRef",ref:o,class:V(l(Te)("border-border bg-background-deep relative flex h-10 w-full items-center overflow-hidden rounded-md border text-center",r.class)),style:C(t.wrapperStyle),onMouseleave:F,onMousemove:j,onMouseup:F,onTouchend:F,onTouchmove:j},[M(ke,{ref_key:"barRef",ref:u,"bar-style":t.barStyle,"to-left":e.toLeft},null,8,["bar-style","to-left"]),M(Ce,{ref_key:"contentRef",ref:g,"content-style":t.contentStyle,"is-passing":e.isPassing,"success-text":t.successText||l(d)("ui.captcha.sliderSuccessText"),text:t.text||l(d)("ui.captcha.sliderDefaultText")},H({_:2},[t.$slots.text?{name:"text",fn:T(()=>[R(t.$slots,"text",{isPassing:e.isPassing})]),key:"0"}:void 0]),1032,["content-style","is-passing","success-text","text"]),M(xe,{ref_key:"actionRef",ref:_,"action-style":t.actionStyle,"is-passing":e.isPassing,"to-left":e.toLeft,onMousedown:b,onTouchstart:b},H({_:2},[t.$slots.actionIcon?{name:"icon",fn:T(()=>[R(t.$slots,"actionIcon",{isPassing:e.isPassing})]),key:"0"}:void 0]),1032,["action-style","is-passing","to-left"])],38))}}),We=["onKeydown"],Ie={class:"text-muted-foreground"},Ne={key:0,class:"mb-6 flex justify-between"},Ae={class:"flex-center"},Fe=E({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(n,{expose:a,emit:s}){const r=n,i=s,[c,e]=fe(te({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:x(()=>r.formSchema),showDefaultActions:!1}));de();const o=`REMEMBER_ME_USERNAME_${location.hostname}`,u=localStorage.getItem(o)||"",g=X(!!u);function _(){return Q(this,null,function*(){const{valid:f}=yield e.validate(),b=yield e.getValues();f&&(localStorage.setItem(o,g.value?b==null?void 0:b.username:""),i("submit",b))})}return Re(()=>{u&&e.setFieldValue("username",u)}),a({getFormApi:()=>e}),(f,b)=>(h(),k("div",{onKeydown:ge(he(_,["prevent"]),["enter"])},[R(f.$slots,"title",{},()=>[M(Pe,null,{desc:T(()=>[ee("span",Ie,[R(f.$slots,"subTitle",{},()=>[B(D(f.subTitle||l(d)("authentication.loginSubtitle")),1)])])]),default:T(()=>[R(f.$slots,"title",{},()=>[B(D(f.title||`${l(d)("authentication.welcomeBack")} 👋🏻`),1)])]),_:3})]),M(l(c)),f.showRememberMe||f.showForgetPassword?(h(),k("div",Ne,[ee("div",Ae,[f.showRememberMe?(h(),A(l(me),{key:0,checked:g.value,"onUpdate:checked":b[0]||(b[0]=W=>g.value=W),name:"rememberMe"},{default:T(()=>[B(D(l(d)("authentication.rememberMe")),1)]),_:1},8,["checked"])):Z("",!0)])])):Z("",!0),M(l(pe),{class:V([{"cursor-wait":f.loading},"w-full"]),loading:f.loading,"aria-label":"login",onClick:_},{default:T(()=>[B(D(f.submitButtonText||l(d)("common.login")),1)]),_:1},8,["class","loading"])],40,We))}}),Ke=E({name:"Login",__name:"login",setup(n){const a=be(),s=[{label:"Super",value:"vben"},{label:"Admin",value:"admin"},{label:"User",value:"jack"}],r=x(()=>[{component:"VbenInput",componentProps:{placeholder:d("authentication.usernameTip")},dependencies:{trigger(i,c){if(i.selectAccount){const e=s.find(o=>o.value===i.selectAccount);e&&c.setValues({password:"123456",username:e.value})}},triggerFields:["selectAccount"]},fieldName:"username",label:d("authentication.username"),rules:Y().min(1,{message:d("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:d("authentication.password")},fieldName:"password",label:d("authentication.password"),rules:Y().min(1,{message:d("authentication.passwordTip")})},{component:Me(Ve),fieldName:"captcha",rules:ye().refine(i=>i,{message:d("authentication.verifyRequiredTip")})}]);return(i,c)=>(h(),A(l(Fe),{"form-schema":r.value,loading:l(a).loginLoading,onSubmit:l(a).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{Ke as _};
